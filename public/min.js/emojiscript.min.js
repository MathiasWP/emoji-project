"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_defineProperty2.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,_asyncToGenerator2.default)(_regenerator.default.mark((function e(){var t,n,r,o,a,i,c,s,u;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.querySelector("#let-me-browse")).addEventListener("click",(function(){document.querySelector("#emoji-frontpage").classList.add("uuuuup-you-go"),a(t)})),e.next=4,fetch("".concat(location.origin,"/../emojis.json"),{method:"GET",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer"});case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,a=function(e){return document.getElementById(e.name.split(" ").join("_").split("‚Äô").join("--")).focus()},(i=o.find((function(e){return"#".concat(e.name)===decodeURI(location.hash)}))||o[Math.floor(Math.random()*o.length)])&&(i.hasOwnProperty("emoji")&&(n.textContent="Show me my ".concat(i.name,"-project ").concat(i.emoji)),n.classList.remove("transparent")),t=i,new Reef("#all-emojis",{template:function(e){return"".concat(e.emojis.map((function(e){return'<span class="emoji-in-showcase" tabindex="0" id="'.concat(e.name.split(" ").join("_").split("‚Äô").join("--"),'">').concat(e.emoji,"</span>")})).join(""))},data:{emojis:o}}).render(),(c=new Reef("#emoji-result",{template:function(e){return'\n    <div class="emoji-result-component">\n    <h3 id="emoji-name">'.concat(e.emoji.name,'</h3>\n    <h2 id="emoji">').concat(e.emoji.emoji,'</h2>\n    <section class="project-languages">\n      Languages used:\n      <span id="languages">').concat(e.emoji.languages.join(", "),'</span>\n    </section>\n    <p id="project-desc">\n      ').concat(e.emoji.project_description,"\n    </p>\n    ").concat(e.emoji.project_tips.length>1?'<p class="project-tips">Tips:\n          <span id="tips">'.concat(e.emoji.project_tips,"</span>\n          </p>"):"","\n  </div>\n    ")},data:{emoji:_objectSpread({},t)}})).render(),new Reef(".search-engine",{template:function(e){return'\n      <input list="search-input" name="search-input" id="emoji-search" placeholder="Search for emojis...">\n      <datalist id="search-input">\n      '.concat(e.emojis.map((function(e){return'<option value="'.concat(e.name,'" tabindex="0">')})).join(""),"\n      </datalist>\n      <button>üîç</button>")},data:{emojis:o}}).render(),document.querySelector("#all-emojis").addEventListener("click",(function(e){"emoji-in-showcase"===e.target.className&&(t=o.find((function(t){return t.name.toLowerCase()===e.target.id.split("_").join(" ").split("--").join("‚Äô").toLowerCase()})),Object.assign(c.data.emoji,t),location.hash=t.name)})),document.querySelector("#lazy").addEventListener("click",(function(){t=o[Math.floor(Math.random()*o.length)],Object.assign(c.data.emoji,t),location.hash=t.name,a(t)})),document.querySelector("#all-emojis").addEventListener("keydown",(function(e){if("emoji-in-showcase"===e.target.className){switch(e.key){case"Tab":t=o.find((function(t){return t.name.toLowerCase()===e.target.id.split("_").join(" ").split("--").join("‚Äô").toLowerCase()})),t=e.shiftKey?o[o.indexOf(t)-1]:o[o.indexOf(t)+1];break;case"Enter":t=o.find((function(t){return t.name.toLowerCase()===e.target.id.split("_").join(" ").split("--").join("‚Äô").toLowerCase()}));break;case"ArrowRight":(e.metaKey||e.ctrlKey)&&e.preventDefault();var n=e.metaKey||e.ctrlKey?o[o.indexOf(t)+10]:o[o.indexOf(t)+1];n||(n=o[o.length-1]),t=n;break;case"ArrowLeft":(e.metaKey||e.ctrlKey)&&e.preventDefault();var r=e.metaKey||e.ctrlKey?o[o.indexOf(t)-10]:o[o.indexOf(t)-1];r||(r=o[0]),t=r;break;case"ArrowDown":e.preventDefault();var i=e.metaKey||e.ctrlKey?o[o.indexOf(t)+90]:o[o.indexOf(t)+9];i||(i=o[o.length-(o.length-o.indexOf(t))%9]),t=i;break;case"ArrowUp":e.preventDefault();var s=e.metaKey||e.ctrlKey?o[o.indexOf(t)-90]:o[o.indexOf(t)-9];s||(s=o[o.indexOf(t)%9]),t=s}"Tab"!==e.key&&(Object.assign(c.data.emoji,t),location.hash=t.name,a(t))}})),s=document.querySelector(".search-engine"),u=document.querySelector("#emoji-search"),s.addEventListener("submit",(function(e){e.preventDefault(),(t=o.find((function(e){return e.emoji===u.value||e.tags.includes(u.value)||e.aliases.includes(u.value)||e.name.toLowerCase()===u.value.toLowerCase()})))?(Object.assign(c.data.emoji,t),location.hash=t.name,a(t)):alert("no emoji found")}));case 24:case"end":return e.stop()}}),e)})))();